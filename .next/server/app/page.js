(()=>{var e={};e.id=974,e.ids=[974],e.modules={440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var o=r(1658);let n=async e=>[{type:"image/x-icon",sizes:"200x200",url:(0,o.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1135:()=>{},1204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Abel\\\\Documents\\\\Code\\\\Undergraduate Final Project\\\\reroute\\\\src\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Abel\\Documents\\Code\\Undergraduate Final Project\\reroute\\src\\app\\page.tsx","default")},2509:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4030:(e,t,r)=>{Promise.resolve().then(r.bind(r,5694))},4206:()=>{},4431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>s});var o=r(7413),n=r(4797),a=r.n(n);r(1135);let s={title:"ReRoute",description:"A live OCTA Transit Website"};function i({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{className:`${a().className} antialiased`,children:e})})}},5665:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});let o=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{lightness:-80}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:-20}]}]},5694:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var o=r(687),n=r(3210),a=r(4280),s=r(6189);r(4206);var i=r(5665),l=r(5814),d=r.n(l);let c=()=>{let e=(0,s.useRouter)(),[t,r]=(0,n.useState)(null),l={lat:33.87884,lng:-117.884973},[c,u]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[m,x]=(0,n.useState)([]),[f,h]=(0,n.useState)(null),y=(0,n.useRef)(null),b=(0,n.useRef)(null),[v,w]=(0,n.useState)(l),k=(0,n.useRef)(!0),[C,T]=(0,n.useState)(null),j=(0,n.useRef)(null),P=(0,n.useRef)(null),S=(0,n.useRef)(null),[R,A]=(0,n.useState)(null),[E,M]=(0,n.useState)(null),{isLoaded:F}=(0,a.KD)({googleMapsApiKey:"AIzaSyC9aGz6l-J4oy2c0bNSARq35HF4OgNYZBI",libraries:["places","maps"]}),_=(0,n.useCallback)(()=>{S.current&&c&&p&&S.current.route({origin:c,destination:p,travelMode:google.maps.TravelMode.TRANSIT},(e,t)=>{if(t===google.maps.DirectionsStatus.OK&&e){if(T(e),e.routes&&e.routes.length>0&&e.routes[0].legs&&e.routes[0].legs.length>0){let t=e.routes[0].legs[0],r=new Date,o=t.duration?.value?Math.round(t.duration.value/60):0,n=new Date(r.getTime()+6e4*o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});A({duration:t.duration?.text||"N/A",arrivalTime:n,departureTime:"N/A",distance:t.distance?.text||"N/A",steps:t.steps||[],routeId:e.routes[0].legs[0].steps[0].transit_details?.line.vehicle?.name?.replace("OCTA BUS ","")||""})}if(y.current&&e.routes[0]&&k.current){let t=new google.maps.LatLngBounds;e.routes[0].legs.forEach(e=>{t.extend(e.start_location),t.extend(e.end_location)}),y.current.fitBounds(t)}}})},[c,p]),O=(0,n.useCallback)(async(e,t,r)=>{try{let o=await fetch(`/api/route?lat=${e}&lng=${t}`),n=await o.json();n.routes&&r(n.routes)}catch(e){console.error("Error fetching routes:",e)}},[]),I=(0,n.useCallback)((e,t)=>{E&&clearTimeout(E),M(setTimeout(()=>{O(e,t,x)},1e3))},[E,O,x]),z=(0,n.useCallback)(e=>{let t={lat:Number(e.coords.latitude.toFixed(9)),lng:Number(e.coords.longitude.toFixed(9))};if(k.current&&(r(t),w(t),k.current=!1),y.current){let e=y.current.getCenter();e&&I(e.lat(),e.lng())}h(null)},[I]),D=(0,n.useCallback)(()=>{if(y.current){let e=y.current.getCenter();if(e){let t={lat:Number(e.lat().toFixed(9)),lng:Number(e.lng().toFixed(9))};w(t),I(t.lat,t.lng)}}},[I]),U=(0,n.useCallback)(()=>{if(!y.current||!t||!window.google||!window.google.maps||!window.google.maps.marker){console.log("Cannot create marker - missing dependencies:",{map:!!y.current,userPosition:!!t,google:!!window.google,maps:!!(window.google&&window.google.maps),marker:!!(window.google&&window.google.maps&&window.google.maps.marker)}),y.current&&t&&window.google&&window.google.maps&&(b.current&&("setMap"in b.current?b.current.setMap(null):b.current.map=null),b.current=new window.google.maps.Marker({position:t,map:y.current,title:"Your Location",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#c5acff",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2}}),console.log("Standard marker created as fallback"));return}try{b.current&&("setMap"in b.current?b.current.setMap(null):b.current.map=null),b.current=new window.google.maps.marker.AdvancedMarkerElement({map:y.current,position:t,title:"Your Location",content:N()}),console.log("Advanced marker created successfully")}catch(e){console.error("Error creating advanced marker:",e),y.current&&t&&window.google&&window.google.maps&&(b.current=new window.google.maps.Marker({position:t,map:y.current,title:"Your Location",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#c5acff",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2}}),console.log("Standard marker created as fallback after error"))}},[t]),N=()=>{let e=document.createElement("div");return e.className="custom-marker",e.innerHTML=`
            <div style="
                background-color: #c5acff; /* Purple color */
                border-radius: 50%;
                width: 20px;
                height: 20px;
                border: 2px solid white;
                box-shadow: 0 2px 6px rgba(0,0,0,0.3);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
                font-size: 12px;
            ">
                You
            </div>
        `,e};(0,n.useEffect)(()=>{if(F&&t){let e=setTimeout(U,500);return()=>clearTimeout(e)}},[F,t,U]),(0,n.useEffect)(()=>{F&&v&&y.current&&I(v.lat,v.lng)},[F,v,I]),(0,n.useEffect)(()=>{if(O(l.lat,l.lng,x),navigator.geolocation){navigator.geolocation.getCurrentPosition(z,e=>{console.error("Error getting high-accuracy location:",e),navigator.geolocation.getCurrentPosition(z,e=>{h(`Error getting location: ${e.message}`),console.error("Error getting low-accuracy location:",e)},{enableHighAccuracy:!1,maximumAge:6e4,timeout:3e4})},{enableHighAccuracy:!0,maximumAge:3e4,timeout:27e3});let e=navigator.geolocation.watchPosition(z,e=>{h(`Error tracking location: ${e.message}`),console.error("Error watching location:",e)},{enableHighAccuracy:!0,maximumAge:6e4,timeout:3e4});return()=>{navigator.geolocation.clearWatch(e),b.current&&("setMap"in b.current?b.current.setMap(null):b.current.map=null)}}h("Geolocation is not supported by your browser")},[l.lat,l.lng,z,O]);let W=t=>{e.push(`/route/${t}`)};return((0,n.useEffect)(()=>{if(F&&j.current&&P.current){let e=new google.maps.places.Autocomplete(j.current,{types:["establishment","geocode"],componentRestrictions:{country:"us"}}),t=new google.maps.places.Autocomplete(P.current,{types:["establishment","geocode"],componentRestrictions:{country:"us"}});S.current=new google.maps.DirectionsService,e.addListener("place_changed",()=>{let t=e.getPlace();t.geometry&&(u(t.formatted_address||""),_())}),t.addListener("place_changed",()=>{let e=t.getPlace();e.geometry&&(g(e.formatted_address||""),_())})}},[F,_]),F)?(0,o.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(to right, #1e3c72, #2a5298)",color:"white",padding:"16px"},children:(0,o.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[(0,o.jsx)("h1",{style:{fontSize:"32px",fontWeight:"bold"},children:"REROUTE"}),(0,o.jsx)("div",{style:{marginLeft:"auto"},children:(0,o.jsx)(d(),{href:"/faq",style:{textDecoration:"none"},children:(0,o.jsx)("button",{style:{background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",transition:"background 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseOut:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:"FAQ"})})})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"32px"},children:[(0,o.jsxs)("div",{style:{flex:"1.5",position:"relative",display:"flex",flexDirection:"column"},children:[(0,o.jsxs)("div",{style:{padding:"16px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",margin:"16px",display:"flex",gap:"16px",alignItems:"center"},children:[(0,o.jsxs)("div",{style:{flex:1,display:"flex",gap:"8px"},children:[(0,o.jsx)("input",{ref:j,type:"text",placeholder:"Origin",value:c,onChange:e=>u(e.target.value),style:{flex:1,padding:"12px",borderRadius:"6px",border:"none",fontSize:"14px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff"}}),(0,o.jsx)("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,r=e.coords.longitude;new google.maps.Geocoder().geocode({location:{lat:t,lng:r}},(e,t)=>{"OK"===t&&e?.[0]&&(u(e[0].formatted_address),j.current&&(j.current.value=e[0].formatted_address))})},e=>{console.error("Error getting location:",e)})},style:{padding:"12px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"14px",whiteSpace:"nowrap",transition:"background 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseOut:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:"\uD83D\uDCCD My Location"})]}),(0,o.jsx)("div",{style:{flex:1,display:"flex",gap:"8px"},children:(0,o.jsx)("input",{ref:P,type:"text",placeholder:"Destination",value:p,onChange:e=>g(e.target.value),style:{flex:1,padding:"12px",borderRadius:"6px",border:"none",fontSize:"14px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff"}})}),(0,o.jsx)("button",{onClick:_,style:{padding:"12px 24px",background:"#93c5fd",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"background 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#60a5fa"},onMouseOut:e=>{e.currentTarget.style.background="#93c5fd"},children:"Search"})]}),f&&(0,o.jsxs)("div",{style:{padding:"8px 16px",background:"rgba(255, 0, 0, 0.2)",borderRadius:"6px",margin:"0 16px 16px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)("span",{style:{color:"#ff6b6b"},children:f}),(0,o.jsx)("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(z,e=>{h(`Error getting location: ${e.message}`),console.error("Error getting location:",e)},{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})},style:{padding:"8px 12px",background:"#228B22",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Try Again"})]}),(0,o.jsx)("div",{className:"map-container map-wrapper",children:(0,o.jsxs)(a.u6,{zoom:14,center:v,mapContainerStyle:{height:"100%",width:"100%"},options:{fullscreenControl:!1,streetViewControl:!1,mapTypeControl:!1,zoomControl:!0,gestureHandling:"greedy",styles:i.b},onLoad:e=>{y.current=e,t&&k.current&&setTimeout(()=>{U()},500)},onDragEnd:D,onZoomChanged:D,children:[t&&(0,o.jsx)(a.pH,{position:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#c5acff",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2}}),C&&(0,o.jsx)(a.C,{directions:C,options:{suppressMarkers:!1,polylineOptions:{strokeColor:"#2563eb",strokeWeight:5}}})]})})]}),(0,o.jsxs)("div",{style:{flex:"1",display:"flex",flexDirection:"column",gap:"32px",overflowY:"auto",maxHeight:"calc(100vh - 150px)"},children:[R&&(0,o.jsxs)("div",{style:{background:"linear-gradient(to right, #1e3c72, #2a5298)",padding:"24px",borderRadius:"10px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("h2",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"16px"},children:"ROUTE INFORMATION"}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)("span",{style:{color:"#93c5fd"},children:"Estimated Time:"}),(0,o.jsx)("span",{style:{fontWeight:"bold"},children:R.duration})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)("span",{style:{color:"#93c5fd"},children:"Estimated Arrival:"}),(0,o.jsx)("span",{style:{fontWeight:"bold"},children:R.arrivalTime})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)("span",{style:{color:"#93c5fd"},children:"Distance:"}),(0,o.jsx)("span",{style:{fontWeight:"bold"},children:R.distance})]})]}),(0,o.jsx)("button",{onClick:()=>{if(c&&p&&R){let t=new URLSearchParams({origin:encodeURIComponent(c),destination:encodeURIComponent(p),duration:encodeURIComponent(R.duration),arrivalTime:encodeURIComponent(R.arrivalTime),distance:encodeURIComponent(R.distance),routeId:encodeURIComponent(R.routeId)});e.push(`/directions?${t.toString()}`)}},style:{width:"100%",padding:"12px",background:"#2563eb",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"bold",marginTop:"16px",transition:"background 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#1d4ed8"},onMouseOut:e=>{e.currentTarget.style.background="#2563eb"},children:"GO"})]}),(0,o.jsxs)("div",{style:{background:"linear-gradient(to right, #1e3c72, #2a5298)",padding:"24px",borderRadius:"10px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:(0,o.jsxs)("h2",{style:{fontSize:"20px",fontWeight:"bold"},children:["NEARBY TRANSIT (",m.length," routes)"]})}),(0,o.jsx)("div",{style:{flex:1,overflowY:"auto"},children:0===m.length?(0,o.jsxs)("p",{style:{color:"#93c5fd"},children:["No nearby routes found. ",f?`Error: ${f}`:""]}):(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:m.map(e=>(0,o.jsxs)("div",{style:{background:"linear-gradient(to right, #1e3c72, #2a5298)",padding:"16px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},onClick:()=>W(e.route_id),onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{fontSize:"18px",fontWeight:"bold"},children:["OCTA BUS ",e.route_id]}),(0,o.jsx)("div",{style:{fontSize:"14px",marginTop:"5px",color:"#93c5fd"},children:e.route_name}),(0,o.jsx)("div",{style:{fontSize:"12px",marginTop:"5px",color:"#93c5fd"},children:"10 Minutes Arrival Prediction: 13 Minutes"})]}),(0,o.jsx)("div",{style:{fontSize:"24px"},children:"➔"})]},e.route_id))})})]})]})]})]})}):(0,o.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(to right, #1e3c72, #2a5298)",color:"white",padding:"32px"},children:(0,o.jsx)("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:(0,o.jsx)("div",{style:{display:"flex",alignItems:"center",marginBottom:"32px"},children:(0,o.jsx)("h1",{style:{fontSize:"24px",fontWeight:"bold"},children:"Loading map..."})})})})}},6477:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},7877:()=>{},7942:(e,t,r)=>{Promise.resolve().then(r.bind(r,1204))},8250:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var o=r(5239),n=r(8088),a=r(8170),s=r.n(a),i=r(893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1204)),"C:\\Users\\Abel\\Documents\\Code\\Undergraduate Final Project\\reroute\\src\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,4431)),"C:\\Users\\Abel\\Documents\\Code\\Undergraduate Final Project\\reroute\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Abel\\Documents\\Code\\Undergraduate Final Project\\reroute\\src\\app\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9733:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[447,685,567,396],()=>r(8250));module.exports=o})();