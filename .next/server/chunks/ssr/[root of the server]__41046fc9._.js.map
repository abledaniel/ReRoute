{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Abel/Documents/Code/Undergraduate%20Final%20Project/reroute/src/app/routes/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\n\r\n// Define the route type\r\ninterface Route {\r\n  route_id: string;\r\n  route_name: string;\r\n  route_url: string;\r\n}\r\n\r\nconst RoutesPage = () => {\r\n  const router = useRouter();\r\n  const [routes, setRoutes] = useState<Route[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchAllRoutes = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Use default coordinates to fetch all routes\r\n        const response = await fetch(`/api/routes?lat=33.878840&lon=-117.884973`);\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`Failed to fetch routes: ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        \r\n        if (data.routes && Array.isArray(data.routes)) {\r\n          const processedRoutes = data.routes.map((route: any) => ({\r\n            route_id: route.route_id || route.route_short_name || '',\r\n            route_name: route.route_desc || route.route_long_name || '',\r\n            route_url: route.route_url || '#',\r\n          }));\r\n          \r\n          setRoutes(processedRoutes);\r\n        } else {\r\n          setRoutes([]);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error fetching routes:\", err);\r\n        setError(err instanceof Error ? err.message : \"An unknown error occurred\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAllRoutes();\r\n  }, []);\r\n\r\n  // Filter routes based on search query\r\n  const filteredRoutes = routes.filter(route => \r\n    route.route_id.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    route.route_name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  // Handle route click\r\n  const handleRouteClick = (routeId: string) => {\r\n    router.push(`/route/${routeId}`);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-900 to-blue-800 text-white p-8\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <div className=\"flex items-center mb-8\">\r\n            <Link href=\"/map\" className=\"mr-4 text-blue-300 hover:text-white\">\r\n              ← Back to Map\r\n            </Link>\r\n            <h1 className=\"text-3xl font-bold\">Loading routes...</h1>\r\n          </div>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"h-8 bg-blue-700 rounded w-1/3 mb-4\"></div>\r\n            <div className=\"space-y-4\">\r\n              {[1, 2, 3, 4, 5, 6, 7, 8].map((i) => (\r\n                <div key={i} className=\"h-16 bg-blue-700 rounded\"></div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-900 to-blue-800 text-white p-8\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <div className=\"flex items-center mb-8\">\r\n            <Link href=\"/map\" className=\"mr-4 text-blue-300 hover:text-white\">\r\n              ← Back to Map\r\n            </Link>\r\n            <h1 className=\"text-3xl font-bold\">Error</h1>\r\n          </div>\r\n          <div className=\"bg-red-900/50 p-6 rounded-lg\">\r\n            <p className=\"text-xl mb-4\">Failed to load routes</p>\r\n            <p className=\"text-red-300\">{error}</p>\r\n            <button \r\n              onClick={() => router.push('/map')}\r\n              className=\"mt-6 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded\"\r\n            >\r\n              Return to Map\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-900 to-blue-800 text-white p-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <div className=\"flex items-center mb-8\">\r\n          <Link href=\"/map\" className=\"mr-4 text-blue-300 hover:text-white\">\r\n            ← Back to Map\r\n          </Link>\r\n          <h1 className=\"text-3xl font-bold\">All Routes</h1>\r\n        </div>\r\n        \r\n        <div className=\"mb-6\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search routes...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"w-full p-3 rounded-lg bg-blue-800/50 border border-blue-700 text-white placeholder-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"bg-blue-800/50 p-6 rounded-lg\">\r\n          <h2 className=\"text-2xl font-bold mb-4\">OCTA Bus Routes ({filteredRoutes.length})</h2>\r\n          \r\n          {filteredRoutes.length === 0 ? (\r\n            <p className=\"text-blue-300\">No routes found matching your search.</p>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {filteredRoutes.map((route) => (\r\n                <div \r\n                  key={route.route_id} \r\n                  className=\"bg-blue-700/50 p-4 rounded-lg flex justify-between items-center cursor-pointer hover:bg-blue-600/50 transition-colors\"\r\n                  onClick={() => handleRouteClick(route.route_id)}\r\n                >\r\n                  <div>\r\n                    <h3 className=\"font-bold text-lg\">OCTA BUS {route.route_id}</h3>\r\n                    <p className=\"text-blue-200\">{route.route_name}</p>\r\n                  </div>\r\n                  <div className=\"text-blue-300\">\r\n                    <span className=\"text-2xl\">➔</span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoutesPage; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}